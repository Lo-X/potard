jQuery(function(a){jQuery.fn.potard=function(e){var b=jQuery.extend({min:0,max:100,color:"#81BE64",width:200,height:200,radius:100,offset:0,thickness:20,lineColor:"#fff",shadow:true,shadowOffsetX:2,shadowOffsetY:0,shadowBlur:4,shadowColor:"rgba(0,0,0,0.3)"},e);return this.each(function(){var i=a(this);var h=jQuery.extend(jQuery.extend([],b),i.data());i.addClass("potard_value");var g=((a(this).val())?a(this).val():((a(this).text())?a(this).text():"0"));var f=(g-h.min)/(h.max-h.min);i.wrap('<div class="potard_wrap" />').each(function(){var l=i.parent();$circle=a('<canvas height="'+h.height+'px" width="'+h.width+'px"/>');$gauge=a('<canvas height="'+h.height+'px" width="'+h.width+'px"/>');l.append($circle);l.append($gauge);var j=0;var k=$circle[0].getContext("2d");k.beginPath();k.lineWidth=h.thickness;k.strokeStyle=h.lineColor;if(h.shadow){k.shadowOffsetX=h.shadowOffsetX;k.shadowOffsetY=h.shadowOffsetY;k.shadowBlur=h.shadowBlur;k.shadowColor=h.shadowColor;j=(h.shadowOffsetX>h.shadowOffsetY)?h.shadowOffsetX:h.shadowOffsetY}k.arc(h.width/2,h.height/2,h.radius-j-h.thickness/2,0,2*Math.PI);k.stroke();var k=$gauge[0].getContext("2d");c(h,f,i,k,j);l.click(function(m){m.preventDefault();c(h,d(m,l,h),i,k,j)});l.mousedown(function(m){m.preventDefault();l.bind("mousemove",(function(n){c(h,d(n,l,h),i,k,j)}))}).mouseup(function(m){m.preventDefault();l.unbind("mousemove")})})});function d(i,h,j){var f=i.pageX-h.offset().left-j.width/2;var k=i.pageY-h.offset().top-j.height/2;var g=(Math.atan2(f,-k)-j.offset/180*Math.PI)/(2*Math.PI);if(g<0){g+=1}return g}function c(j,h,k,g,f){g.clearRect(0,0,j.width,j.height);g.beginPath();g.lineWidth=j.thickness;g.strokeStyle=j.color;g.arc(j.width/2,j.height/2,j.radius-f-j.thickness/2,(-1/2+j.offset/180)*Math.PI,h*2*Math.PI+(-1/2+j.offset/180)*Math.PI);g.stroke();var i=Math.round(h*(j.max-j.min)+j.min);if(k[0].tagName=="INPUT"){k.val(i)}else{k.text(i)}}}});